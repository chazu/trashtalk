#!/bin/bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: TestCase.trash
# Generated: 2025-12-16T22:01:34

__TestCase__superclass="Object"
__TestCase__instanceVars="passed:0 failed:0 currentTest unknown"
__TestCase__traits=""

__TestCase__class__new() {
    local id
    id=$(_generate_instance_id "$_CLASS")
    _create_instance "$_CLASS" "$id"
    echo "$id"
}

__TestCase__setUp() {
    :
}

__TestCase__tearDown() {
    :
}

__TestCase__assert_equals() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" == "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$expected' but got '$actual'"
    fi
}

__TestCase__assertTrue() {
  local condition="$1"
    if [[ "$condition" == "true" || "$condition" == "1" || -n "$condition" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Assertion failed - expected truthy value"
    fi
}

__TestCase__assertFalse() {
  local condition="$1"
    if [[ "$condition" == "false" || "$condition" == "0" || -z "$condition" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected false but got '$condition'"
    fi
}

__TestCase__fail() {
  local message="$1"
    @ "$_RECEIVER" _fail: "$message"
}

__TestCase___pass() {
  local count
  count=$(@ $_RECEIVER getPassed)
  @ "$_RECEIVER" setPassed $((count + 1))
}

__TestCase___fail() {
  local message="$1"
    local count test
    count=$(@ "$_RECEIVER" getFailed)
    test=$(@ "$_RECEIVER" getCurrentTest)
    @ "$_RECEIVER" setFailed: $((count + 1))
    echo " FAIL: $test - $message" >&2
}

__TestCase__runTest() {
  local methodName="$1"
    @ "$_RECEIVER" setCurrentTest: "$methodName"
    @ "$_RECEIVER" setUp
    @ "$_RECEIVER" "$methodName"
    @ "$_RECEIVER" tearDown
}

__TestCase__class__runAll() {
    local instance passed failed total
    instance=$(@ $_CLASS new)

    # Find and run all test methods
    for method in $(declare -F | grep "__${_CLASS}__test" | sed "s/.*__${_CLASS}__//"); do
        echo " Running: $method"
        @ "$instance" runTest: "$method"
    done

    passed=$(@ "$instance" getPassed)
    failed=$(@ "$instance" getFailed)
    total=$((passed + failed))

    echo ""
    if [[ "$failed" -eq 0 ]]; then
        echo "All $total assertions passed"
        else
        echo "$passed passed, $failed failed (of $total assertions)"
    fi

    return "$failed"
}
