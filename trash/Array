#!/bin/bash
# Generated by Trashtalk Compiler - DO NOT EDIT
# Source: Array.trash
# Generated: 2025-12-15T14:30:53-05:00

__Array__superclass="Object"
__Array__instanceVars="items:[]"
__Array__traits="Debuggable"

__Array__new() {
  local array_id
  array_id=$(_generate_instance_id "Array")
  _create_instance "Array" "$array_id"
  echo $array_id
}

__Array___getItemsArray() {
  local items
  items=$(@ $_RECEIVER getItems)
  echo ${items:-[]}
}

__Array__at() {
  local index="$1"
  local items
  items=$(@ $_RECEIVER _getItemsArray)
  echo "$items" | jq -r ".[$index] // empty"
}

__Array__at_put() {
  local index="$1"
  local value="$2"
  local items new_items
  items=$(@ $_RECEIVER _getItemsArray)
  new_items=$(echo "$items" | jq -c ".[$index] = \"$value\"")
  @ "$_RECEIVER" setItems "$new_items"
  echo $value
}

__Array__push() {
  local value="$1"
  local items new_items
  items=$(@ $_RECEIVER _getItemsArray)
  new_items=$(echo "$items" | jq -c ". + [\"$value\"]")
  @ "$_RECEIVER" setItems "$new_items"
  echo $value
}

__Array__pop() {
  local items last new_items
  items=$(@ $_RECEIVER _getItemsArray)
  last=$(echo "$items" | jq -r '.[-1] // empty')
  new_items=$(echo "$items" | jq -c '.[0:-1]')
  @ "$_RECEIVER" setItems "$new_items"
  echo $last
}

__Array__size() {
  local items
  items=$(@ $_RECEIVER _getItemsArray)
  echo "$items" | jq 'length'
}

__Array__show() {
  local items len
  items=$(@ $_RECEIVER _getItemsArray)
  len=$(echo "$items" | jq 'length')
  if [[ "$len" -eq 0 ]]; then
  echo "(empty array)"
  else
  echo "$items" | jq -r '.[]' | nl -v0 | sed 's/^[ \t]*//'
  fi
}

__Array__withValues() {
  local values="$1"
  local items value
  items="[]"
  for value in $values; do
  items=$(echo "$items" | jq -c ". + [\"$value\"]")
  done
  @ "$_RECEIVER" setItems "$items"
  echo $_RECEIVER
}
