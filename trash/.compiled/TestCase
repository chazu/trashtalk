#!/usr/bin/env bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: TestCase.trash
# Generated: 2025-12-25T00:09:31

__TestCase__superclass="Object"
__TestCase__instanceVars="passed:0 failed:0 skipped:0 currentTest:unknown"
__TestCase__classInstanceVars=""
__TestCase__traits=""

__TestCase__getPassed() {
  echo "$(_ivar passed)"; return
}

__TestCase__setPassed() {
  _ivar_set passed "$1"
}
__TestCase__getFailed() {
  echo "$(_ivar failed)"; return
}

__TestCase__setFailed() {
  _ivar_set failed "$1"
}
__TestCase__getSkipped() {
  echo "$(_ivar skipped)"; return
}

__TestCase__setSkipped() {
  _ivar_set skipped "$1"
}
__TestCase__getCurrentTest() {
  echo "$(_ivar currentTest)"; return
}

__TestCase__setCurrentTest() {
  _ivar_set currentTest "$1"
}

__TestCase__class__new() {
    local id
    id=$(_generate_instance_id "$_CLASS")
    _create_instance "$_CLASS" "$id"
    echo "$id"
}

__TestCase__setUp() {
    :
}

__TestCase__tearDown() {
    :
}

__TestCase__assert_equals_() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" == "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$expected' but got '$actual'"
    fi
}

__TestCase__assert_equals() {
    local actual="$1"
    local expected="$2"
    if [[ "$actual" == "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$expected' but got '$actual'"
    fi
}

__TestCase__assert_notEquals_() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" != "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$actual' to not equal '$expected'"
    fi
}

__TestCase__assert_not_equals() {
    local actual="$1"
    local expected="$2"
    if [[ "$actual" != "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$actual' to not equal '$expected'"
    fi
}

__TestCase__assertTrue_() {
  local condition="$1"
    if [[ "$condition" == "true" || "$condition" == "1" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected true but got '$condition'"
    fi
}

__TestCase__assert_true() {
    local condition="$1"
    if [[ "$condition" == "true" || "$condition" == "1" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected true but got '$condition'"
    fi
}

__TestCase__assertFalse_() {
  local condition="$1"
    if [[ "$condition" == "false" || "$condition" == "0" || -z "$condition" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected false but got '$condition'"
    fi
}

__TestCase__assert_false() {
    local condition="$1"
    if [[ "$condition" == "false" || "$condition" == "0" || -z "$condition" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected false but got '$condition'"
    fi
}

__TestCase__assertNil_() {
  local value="$1"
    if [[ -z "$value" || "$value" == "null" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected nil/empty but got '$value'"
    fi
}

__TestCase__assert_nil() {
    local value="$1"
    if [[ -z "$value" || "$value" == "null" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected nil/empty but got '$value'"
    fi
}

__TestCase__assertNotNil_() {
  local value="$1"
    if [[ -n "$value" && "$value" != "null" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected non-nil value but got nil/empty"
    fi
}

__TestCase__assert_not_nil() {
    local value="$1"
    if [[ -n "$value" && "$value" != "null" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected non-nil value but got nil/empty"
    fi
}

__TestCase__assert_contains_() {
  local haystack="$1"
  local needle="$2"
    if echo "$haystack" | grep -qF "$needle"; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$haystack' to contain '$needle'"
    fi
}

__TestCase__assert_contains() {
    local haystack="$1"
    local needle="$2"
    if echo "$haystack" | grep -qF "$needle"; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$haystack' to contain '$needle'"
    fi
}

__TestCase__assert_matches_() {
  local actual="$1"
  local pattern="$2"
    if echo "$actual" | grep -qE "$pattern"; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$actual' to match pattern '$pattern'"
    fi
}

__TestCase__assert_matches() {
    local actual="$1"
    local pattern="$2"
    if echo "$actual" | grep -qE "$pattern"; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$actual' to match pattern '$pattern'"
    fi
}

__TestCase__assert_greaterThan_() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" -gt "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected $actual > $expected"
    fi
}

__TestCase__assert_greater_than() {
    local actual="$1"
    local expected="$2"
    if [[ "$actual" -gt "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected $actual > $expected"
    fi
}

__TestCase__assert_lessThan_() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" -lt "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected $actual <$expected"
    fi
}

__TestCase__assert_less_than() {
    local actual="$1"
    local expected="$2"
    if [[ "$actual" -lt "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected $actual <$expected"
    fi
}

__TestCase__assert_greaterOrEqual_() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" -ge "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected $actual >= $expected"
    fi
}

__TestCase__assert_lessOrEqual_() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" -le "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected $actual <= $expected"
    fi
}

__TestCase__skip_() {
  local reason="$1"
    local test count
    test=$(@ "$_RECEIVER" getCurrentTest)
    count=$(@ "$_RECEIVER" getSkipped)
    @ "$_RECEIVER" setSkipped: $((count + 1))
    echo " SKIP: $test - $reason"
    return 77 # Special return code to signal skip
}

__TestCase__skip() {
    local test count
    test=$(@ "$_RECEIVER" getCurrentTest)
    count=$(@ "$_RECEIVER" getSkipped)
    @ "$_RECEIVER" setSkipped: $((count + 1))
    echo " SKIP: $test - No reason given"
    return 77
}

__TestCase__pending_() {
  local description="$1"
    local test count
    test=$(@ "$_RECEIVER" getCurrentTest)
    count=$(@ "$_RECEIVER" getSkipped)
    @ "$_RECEIVER" setSkipped: $((count + 1))
    echo " PENDING: $test - $description"
    return 77
}

__TestCase__pending() {
    local test count
    test=$(@ "$_RECEIVER" getCurrentTest)
    count=$(@ "$_RECEIVER" getSkipped)
    @ "$_RECEIVER" setSkipped: $((count + 1))
    echo " PENDING: $test - Not yet implemented"
    return 77
}

__TestCase__fail_() {
  local message="$1"
    @ "$_RECEIVER" _fail: "$message"
}

__TestCase__fail() {
    @ "$_RECEIVER" _fail: "Explicit failure"
}

__TestCase___pass() {
  local count
  count=$(@ $_RECEIVER getPassed)
  @ "$_RECEIVER" setPassed: $((count + 1))
}

__TestCase___fail_() {
  local message="$1"
    local count test
    count=$(@ "$_RECEIVER" getFailed)
    test=$(@ "$_RECEIVER" getCurrentTest)
    @ "$_RECEIVER" setFailed: $((count + 1))
    echo " FAIL: $test - $message" >&2
}

__TestCase__runTest_() {
  local methodName="$1"
    @ "$_RECEIVER" setCurrentTest: "$methodName"
    @ "$_RECEIVER" setUp
    @ "$_RECEIVER" "$methodName"
    local result=$?
    @ "$_RECEIVER" tearDown
    return $result
}

__TestCase__class__runAll() {
    local instance passed failed skipped total
    instance=$(@ $_CLASS new)

    echo "Running $_CLASS tests..."
    echo ""

    # Find and run all test methods
    for method in $(declare -F | grep "__${_CLASS}__test" | sed "s/.*__${_CLASS}__//"); do
        echo " Running: $method"
        @ "$instance" runTest: "$method"
    done

    passed=$(@ "$instance" getPassed)
    failed=$(@ "$instance" getFailed)
    skipped=$(@ "$instance" getSkipped)
    total=$((passed + failed))

    echo ""
    echo "----------------------------------------"
    if [[ "$failed" -eq 0 ]]; then
        echo "OK: $passed assertions passed"
        else
        echo "FAILED: $passed passed, $failed failed"
    fi
    if [[ "$skipped" -gt 0 ]]; then
        echo "Skipped: $skipped"
    fi
    echo "----------------------------------------"

    @ "$instance" delete
    return "$failed"
}
