#!/bin/bash
# Generated by Trashtalk Compiler - DO NOT EDIT
# Source: Tuplespace.trash
# Generated: 2025-12-14T21:22:21-05:00

__Tuplespace__superclass="Object"
__Tuplespace__instanceVars=""
__Tuplespace__traits="Debuggable"

# Required dependencies
source "$SCRIPT_DIR/vendor/tuplespace/tuplespace.bash"

__Tuplespace__init() {
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Initializing tuplespace system"
  ts_init
  echo "Tuplespace initialized at $TUPLESPACE_DIR"
}

__Tuplespace__put_args() {
  local tuple_type="$1"
  local args="$2"
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Putting tuple of type: $tuple_type"
  ts_put "$tuple_type" $args
}

__Tuplespace__get_key_value() {
  local tuple_type="$1"
  local key="$2"
  local value="$3"
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Getting tuples of type: $tuple_type"
  ts_get "$tuple_type" "$key" "$value"
}

__Tuplespace__take_key_value() {
  local tuple_type="$1"
  local key="$2"
  local value="$3"
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Taking tuples of type: $tuple_type"
  ts_take "$tuple_type" "$key" "$value"
}

__Tuplespace__wait_key_value_timeout() {
  local tuple_type="$1"
  local key="$2"
  local value="$3"
  local timeout="$4"
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Waiting for tuples of type: $tuple_type (timeout: $timeout)"
  ts_wait "$tuple_type" "$key" "$value" "$timeout"
}

__Tuplespace__listen_command() {
  local tuple_type="$1"
  local command="$2"
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Setting up listener for type: $tuple_type"
  ts_listen "$tuple_type" "$command"
}

__Tuplespace__stopListener_process() {
  local tuple_type="$1"
  local process_id="$2"
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Stopping listener for type: $tuple_type, process: $process_id"
  ts_stop_listener "$tuple_type" "$process_id"
}

__Tuplespace__field_name() {
  local tuple_record="$1"
  local field_name="$2"
  ts_field "$tuple_record" "$field_name"
}

__Tuplespace__list() {
  [[ "${TRASH_DEBUG:-1}" != "0" ]] && debug "Listing all tuples"
  ts_list
}

__Tuplespace__count() {
  local tuple_type="$1"
  if [[ -n "$tuple_type" ]]; then
  debug "Counting tuples of type: $tuple_type"
  else
  debug "Counting all tuples"
  fi
  ts_count "$tuple_type"
}

__Tuplespace__clear() {
  debug "Clearing all tuples from tuplespace"
  ts_clear
}

__Tuplespace__putKV_value() {
  local key="$1"
  local value="$2"
  debug "Putting key-value: $key = $value"
  ts_kv_put "$key" "$value"
}

__Tuplespace__getKV() {
  local key="$1"
  debug "Getting value for key: $key"
  ts_kv_get "$key"
}

__Tuplespace__putEvent_data() {
  local event_name="$1"
  local data="$2"
  debug "Putting event: $event_name"
  ts_event_put "$event_name" "$data"
}

__Tuplespace__info() {
  echo "=== Tuplespace System Information ==="
  echo "Directory: $TUPLESPACE_DIR"
  echo "Database: $TUPLESPACE_DB"
  echo "Events Dir: $TUPLESPACE_EVENTS_DIR"
  echo "Listeners Dir: $TUPLESPACE_LISTENERS_DIR"
  echo "Total tuples: $(ts_count)"
  echo ""
  echo "Tuple types:"
  if [[ -s "$TUPLESPACE_DB" ]]; then
  recsel "$TUPLESPACE_DB" | grep "^Type:" | sort | uniq -c | sed 's/^/  /'
  else
  echo "  (no tuples)"
  fi
}

__Tuplespace__help() {
  echo "=== Tuplespace Commands ==="
  echo "Basic Operations:"
  echo "  @ Tuplespace put <type> <key1> <value1> ...  - Put tuple"
  echo "  @ Tuplespace get <type> [key] [value]        - Get tuples"
  echo "  @ Tuplespace take <type> [key] [value]       - Take tuples"
  echo "  @ Tuplespace wait <type> [key] [value] [timeout] - Wait for tuple"
  echo ""
  echo "Event System:"
  echo "  @ Tuplespace listen <type> <command>         - Listen for events"
  echo "  @ Tuplespace stopListener <type> <pid>       - Stop listener"
  echo ""
  echo "Convenience Methods:"
  echo "  @ Tuplespace putKV <key> <value>             - Put key-value"
  echo "  @ Tuplespace getKV <key>                     - Get value"
  echo "  @ Tuplespace putEvent <name> [data]          - Put event"
  echo ""
  echo "Utility:"
  echo "  @ Tuplespace list                            - List all tuples"
  echo "  @ Tuplespace count [type]                    - Count tuples"
  echo "  @ Tuplespace clear                           - Clear all tuples"
  echo "  @ Tuplespace info                            - System info"
  echo "  @ Tuplespace init                            - Initialize system"
}
