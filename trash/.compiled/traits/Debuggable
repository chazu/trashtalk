#!/usr/bin/env bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: Debuggable.trash (trait)
# Generated: 2026-01-04T02:40:36

__Debuggable__is_trait="1"
__Debuggable__sourceHash="aac5d22878923734f710bf41c3c45ce7219c9c80a89dd2b4f53bd12f4bf54d0a"

__Debuggable__source() {
  cat <<'__TRASHTALK_SOURCE_EOF__'
# Debuggable trait - provides debugging capabilities to objects
Debuggable trait

  # Output debug message (respects TRASH_DEBUG env var)
  method: debug: message [
    [[ "${TRASH_DEBUG:-1}" == "0" ]] && return 0
    | timestamp |
    timestamp := $(date '+%Y-%m-%d %H:%M:%S')
    echo "[$timestamp] DEBUG ($_RECEIVER): $message" >&2
  ]

  # Trace a method call
  method: trace: method_name args: args [
    @ self debug: "Calling $method_name with args: $args"
  ]

  # Inspect object details
  method: inspect [
    echo "Object: $_RECEIVER"
    echo "Class: $_SUPERCLASS"
    echo "Methods:"
    get_fcn_list "$(receiver_path $_RECEIVER)" | sed 's/^/  /'
  ]

  # Show the inheritance chain
  method: ancestry [
    | current_class super |
    current_class := "$_RECEIVER"
    echo "Inheritance chain for $_RECEIVER:"
    while [[ -n "$current_class" ]]; do
      echo "  $current_class"
      if [[ -f "$TRASHDIR/$current_class" ]]; then
        super := $(grep "^is_a" "$TRASHDIR/$current_class" | awk '{print $2}')
        current_class := "$super"
        if [[ "$current_class" == "Object" ]]; then
          echo "  Object"
          break
        fi
      else
        break
      fi
    done
  ]
__TRASHTALK_SOURCE_EOF__
}

__Debuggable__debug_() {
  local message="$1"
  [[ "${TRASH_DEBUG:-1}" == "0" ]] && return 0
  local timestamp
  timestamp=$(date '+%Y-%m-%d %H:%M:%S')
  echo "[$timestamp] DEBUG ($_RECEIVER): $message" >&2
}

__Debuggable__trace_args_() {
  local method_name="$1"
  local args="$2"
  @ "$_RECEIVER" debug: "Calling $method_name with args: $args"
}

__Debuggable__inspect() {
  echo "Object: $_RECEIVER"
  echo "Class: $_SUPERCLASS"
  echo "Methods:"
  get_fcn_list "$(receiver_path $_RECEIVER)" | sed 's/^/ /'
}

__Debuggable__ancestry() {
  local current_class super
  current_class="$_RECEIVER"
  echo "Inheritance chain for $_RECEIVER:"
  while [[ -n "$current_class" ]]; do
  echo " $current_class"
  if [[ -f "$TRASHDIR/$current_class" ]]; then
  super=$(grep "^is_a" "$TRASHDIR/$current_class" | awk '{print $2}')
  current_class="$super"
  if [[ "$current_class" == "Object" ]]; then
  echo " Object"
  break
  fi
  else
  break
  fi
  done
}
