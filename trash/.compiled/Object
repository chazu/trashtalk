#!/bin/bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: Object.trash
# Generated: 2025-12-19T02:34:16

__Object__superclass="nil"
__Object__instanceVars=""
__Object__classInstanceVars=""
__Object__traits=""

__Object__printString() {
    echo "<${_CLASS} ${_INSTANCE}>"
}

__Object__class() {
    echo "$_CLASS"
}

__Object__id() {
    echo "$_INSTANCE"
}

__Object__isKindOf() {
  local className="$1"
    local current="$_CLASS"
    while [[ -n "$current" ]]; do
        if [[ "$current" == "$className" ]]; then
            echo "true"
            return 0
        fi
        local super_var="__${current}__superclass"
        current="${!super_var:-}"
    done
    echo "false"
}

__Object__conformsTo() {
  local protocolName="$1"
    _conforms_to "$_CLASS" "$protocolName"
}

__Object__delete() {
    _delete_instance "$_INSTANCE"
}

__Object__inspect() {
    local data
    data=$(db_get "$_RECEIVER" 2>/dev/null)

    echo "a $_CLASS"
    echo " id: $_INSTANCE"

    if [[ -n "$data" && "$data" != "{}" ]]; then
        echo "$data" | jq -r 'to_entries | .[] | " \(.key): \(.value)"'
    fi
}

__Object__class__findAll() {
    db_find_by_class "$_CLASS"
}

__Object__class__count() {
    db_count_by_class "$_CLASS"
}

__Object__class__find() {
    local predicate="$1"

    if [[ -z "$predicate" ]]; then
        db_find_by_class "$_CLASS"
        return
    fi

    # Parse predicate using helper function from runtime
    _find_with_predicate "$_CLASS" "$predicate"
}

__Object__asJson() {
    db_get "$_RECEIVER"
}
