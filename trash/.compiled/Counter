#!/usr/bin/env bash
# Generated by Trashtalk Compiler (procyon) - DO NOT EDIT
# Source: Counter.trash
# Generated: 2026-01-12T18:32:07

__Counter__superclass="Object"
__Counter__instanceVars="value:0 step:1"
__Counter__classInstanceVars=""
__Counter__traits="Persistable"
__Counter__sourceHash="1b4be322e6f68a5ac8f4ded30db69bba439eb85905e56ec4a54ac0769552efd3"

__Counter__source() {
  cat <<'__TRASHTALK_SOURCE_EOF__'
# Counter - A simple counter class demonstrating Trashtalk DSL
# Instance variables use Smalltalk-style inference: value -> $(_ivar value)
Counter subclass: Object
  include: Persistable
  instanceVars: value:0 step:1

  classMethod: new [
    | id |
    id := @ Runtime generateId: "Counter"
    @ Runtime create: "Counter" id: id
    ^ id
  ]

  method: getValue [
    ^ value + 0
  ]

  method: getStep [
    ^ step + 0
  ]

  method: setValue: val [
    value := val + 0
  ]

  method: setStep: val [
    step := val + 0
  ]

  method: increment [
    | newVal |
    newVal := value + step
    value := newVal + 0
    ^ newVal + 0
  ]

  method: decrement [
    | newVal |
    newVal := value - step
    value := newVal + 0
    ^ newVal + 0
  ]

  method: incrementBy: amount [
    | newVal |
    newVal := value + amount
    value := newVal + 0
  ]

  method: reset [
    value := 0 + 0
  ]

  classMethod: description [
    ^ "A simple counter"
  ]
__TRASHTALK_SOURCE_EOF__
}

__Counter__value() {
  echo "$(_ivar value)"; return
}

__Counter__value_() {
  _ivar_set value "$1"
}

__Counter__step() {
  echo "$(_ivar step)"; return
}

__Counter__step_() {
  _ivar_set step "$1"
}

__Counter__class__new() {
  local id
  id="$(@ Runtime generateId_ "Counter")"
  $(@ Runtime create_id_ "Counter" $id)
  echo "$id"; return
}

__Counter__getValue() {
  echo "$(( $(_ivar value) + 0 ))"; return
}

__Counter__getStep() {
  echo "$(( $(_ivar step) + 0 ))"; return
}

__Counter__setValue_() {
  local val="$1"
  local __arith__; (( __arith__ = ($val + 0) )); _ivar_set value "$__arith__"
}

__Counter__setStep_() {
  local val="$1"
  local __arith__; (( __arith__ = ($val + 0) )); _ivar_set step "$__arith__"
}

__Counter__increment() {
  local newVal
  (( newVal = ($(_ivar value) + $(_ivar step)) ))
  local __arith__; (( __arith__ = ($newVal + 0) )); _ivar_set value "$__arith__"
  echo "$(( $newVal + 0 ))"; return
}

__Counter__decrement() {
  local newVal
  (( newVal = ($(_ivar value) - $(_ivar step)) ))
  local __arith__; (( __arith__ = ($newVal + 0) )); _ivar_set value "$__arith__"
  echo "$(( $newVal + 0 ))"; return
}

__Counter__incrementBy_() {
  local amount="$1"
  local newVal
  (( newVal = ($(_ivar value) + $amount) ))
  local __arith__; (( __arith__ = ($newVal + 0) )); _ivar_set value "$__arith__"
}

__Counter__reset() {
  local __arith__; (( __arith__ = (0 + 0) )); _ivar_set value "$__arith__"
}

__Counter__class__description() {
  echo ""A simple counter""; return
}

__Counter__save() {
  local data
  data="$(@ Runtime dataFor_ $_RECEIVER)"
  $(@ Store put_data_ $_RECEIVER $data)
}

__Counter__unpersist() {
  $(@ Store deleteInstance_ $_RECEIVER)
}

__Counter__delete() {
  $(@ Store deleteInstance_ $_RECEIVER)
  $(@ Runtime delete_ $_RECEIVER)
}

__Counter__isPersisted() {
  echo "$(@ Store exists_ $_RECEIVER)"; return
}

__Counter__reload() {
  local data
  data="$(@ Store getInstance_ $_RECEIVER)"
  $(@ Runtime setData_for_ $data $_RECEIVER)
}

__Counter__asJson() {
  echo "$(@ Runtime dataFor_ $_RECEIVER)"; return
}

__Counter__class__create() {
  local id
  id="$(@ "$_RECEIVER" new)"
  $(@ "$id" save)
  echo "$id"; return
}

__Counter__class__findAll() {
  echo "$(@ Store findByClass_ $_RECEIVER)"; return
}

__Counter__class__count() {
  echo "$(@ Store countByClass_ $_RECEIVER)"; return
}

__Counter__class__find_() {
  local predicate="$1"
  if [[ -n "$(@ "$predicate" isEmpty)" ]]; then
    echo "$(@ "$_RECEIVER" findAll)"; return
  fi
  echo "$(@ Store findByClass_where_ $_RECEIVER $predicate)"; return
}

__Counter__class__loadAll() {
  local ids arr
  ids="$(@ Store findByClass_ $_RECEIVER)"
  arr="$(@ Array fromLines_ $ids)"
  for id in $arr; do
    $(@ "$id" reload)
  done
}

