#!/usr/bin/env bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: Event.trash
# Generated: 2026-01-04T03:14:30

__Yutani__Event__superclass="Object"
__Yutani__Event__instanceVars="rawJson: eventType: widgetId: keyName: keyMods: mouseX: mouseY: mouseButton: data:"
__Yutani__Event__classInstanceVars=""
__Yutani__Event__traits=""
__Yutani__Event__sourceHash="d22dd9512c3247fac578249f669be37428017f9e1d9d7406f0bf9b4fafd4c9eb"
__Yutani__Event__package="Yutani"
__Yutani__Event__qualifiedName="Yutani::Event"

__Yutani__Event__source() {
  cat <<'__TRASHTALK_SOURCE_EOF__'
package: Yutani

Event subclass: Object
  instanceVars: rawJson:'' eventType:'' widgetId:'' keyName:'' keyMods:'' mouseX:'' mouseY:'' mouseButton:'' data:''

  # Parse a JSON event string into an Event object
  rawClassMethod: fromJson: json [
    local json="$1"
    local instance eventType widgetId keyName keyMods mouseX mouseY mouseButton data

    instance=$(_generate_instance_id "Yutani__Event")
    _create_instance "Yutani::Event" "$instance"

    # Store raw JSON
    @ "$instance" _setRawJson: "$json"

    # Determine event type and extract fields
    if echo "$json" | jq -e '.key' >/dev/null 2>&1; then
      eventType="key"
      keyName=$(echo "$json" | jq -r '.key.key // ""')
      keyMods=$(echo "$json" | jq -r '.key.modifiers // ""')
      @ "$instance" _setEventType: "$eventType"
      @ "$instance" _setKeyName: "$keyName"
      @ "$instance" _setKeyMods: "$keyMods"
    elif echo "$json" | jq -e '.widget' >/dev/null 2>&1; then
      eventType="widget"
      widgetId=$(echo "$json" | jq -r '.widget.widgetId.id // ""')
      data=$(echo "$json" | jq -r '.widget.type // ""')
      @ "$instance" _setEventType: "$eventType"
      @ "$instance" _setWidgetId: "$widgetId"
      @ "$instance" _setData: "$data"
    elif echo "$json" | jq -e '.mouse' >/dev/null 2>&1; then
      eventType="mouse"
      mouseX=$(echo "$json" | jq -r '.mouse.x // 0')
      mouseY=$(echo "$json" | jq -r '.mouse.y // 0')
      mouseButton=$(echo "$json" | jq -r '.mouse.button // ""')
      @ "$instance" _setEventType: "$eventType"
      @ "$instance" _setMouseX: "$mouseX"
      @ "$instance" _setMouseY: "$mouseY"
      @ "$instance" _setMouseButton: "$mouseButton"
    elif echo "$json" | jq -e '.resize' >/dev/null 2>&1; then
      eventType="resize"
      @ "$instance" _setEventType: "$eventType"
    elif echo "$json" | jq -e '.focus' >/dev/null 2>&1; then
      eventType="focus"
      @ "$instance" _setEventType: "$eventType"
    else
      eventType="unknown"
      @ "$instance" _setEventType: "$eventType"
    fi

    echo "$instance"
  ]

  # Type checking methods
  rawMethod: isKeyEvent [
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "key" ]]; then echo "true"; else echo "false"; fi
  ]

  rawMethod: isWidgetEvent [
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "widget" ]]; then echo "true"; else echo "false"; fi
  ]

  rawMethod: isMouseEvent [
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "mouse" ]]; then echo "true"; else echo "false"; fi
  ]

  rawMethod: isResizeEvent [
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "resize" ]]; then echo "true"; else echo "false"; fi
  ]

  rawMethod: isFocusEvent [
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "focus" ]]; then echo "true"; else echo "false"; fi
  ]

  # Accessors
  method: eventType [
    _ivar eventType
  ]

  method: widgetId [
    _ivar widgetId
  ]

  method: keyName [
    _ivar keyName
  ]

  method: keyMods [
    _ivar keyMods
  ]

  method: mouseX [
    _ivar mouseX
  ]

  method: mouseY [
    _ivar mouseY
  ]

  method: mouseButton [
    _ivar mouseButton
  ]

  method: data [
    _ivar data
  ]

  method: rawJson [
    _ivar rawJson
  ]

  # Get widget event type (WIDGET_SUBMITTED, etc.)
  rawMethod: widgetEventType [
    local json
    json="$(_ivar rawJson)"
    echo "$json" | jq -r '.widget.type // ""'
  ]

  # Get widget event data map
  rawMethod: widgetData [
    local json
    json="$(_ivar rawJson)"
    echo "$json" | jq -r '.widget.data // {}'
  ]

  # Get specific widget data field
  rawMethod: widgetDataAt: key [
    local key="$1" json
    json="$(_ivar rawJson)"
    echo "$json" | jq -r ".widget.data.$key // \"\""
  ]

  # Check if this is a specific key
  rawMethod: isKey: keyToCheck [
    local keyToCheck="$1" kn
    kn="$(_ivar keyName)"
    if [[ "$kn" == "$keyToCheck" ]]; then echo "true"; else echo "false"; fi
  ]

  # Check for common keys
  rawMethod: isEnterKey [
    @ "$_RECEIVER" isKey: "KEY_ENTER"
  ]

  rawMethod: isEscapeKey [
    @ "$_RECEIVER" isKey: "KEY_ESC"
  ]

  rawMethod: isTabKey [
    @ "$_RECEIVER" isKey: "KEY_TAB"
  ]

  rawMethod: isCtrlC [
    @ "$_RECEIVER" isKey: "KEY_CTRL_C"
  ]

  rawMethod: isCtrlD [
    @ "$_RECEIVER" isKey: "KEY_CTRL_D"
  ]

  rawMethod: isCtrlL [
    @ "$_RECEIVER" isKey: "KEY_CTRL_L"
  ]

  # Check if widget event is submission (WIDGET_DONE from Yutani)
  rawMethod: isSubmission [
    local wt
    wt=$(@ "$_RECEIVER" widgetEventType)
    if [[ "$wt" == "WIDGET_DONE" ]]; then echo "true"; else echo "false"; fi
  ]

  # Private setters
  method: _setRawJson: v [ _ivar_set rawJson "$v" ]
  method: _setEventType: v [ _ivar_set eventType "$v" ]
  method: _setWidgetId: v [ _ivar_set widgetId "$v" ]
  method: _setKeyName: v [ _ivar_set keyName "$v" ]
  method: _setKeyMods: v [ _ivar_set keyMods "$v" ]
  method: _setMouseX: v [ _ivar_set mouseX "$v" ]
  method: _setMouseY: v [ _ivar_set mouseY "$v" ]
  method: _setMouseButton: v [ _ivar_set mouseButton "$v" ]
  method: _setData: v [ _ivar_set data "$v" ]
__TRASHTALK_SOURCE_EOF__
}

__Yutani__Event__rawJson() {
  echo "$(_ivar rawJson)"; return
}

__Yutani__Event__rawJson_() {
  _ivar_set rawJson "$1"
}

__Yutani__Event__getRawJson() {
  echo "$(_ivar rawJson)"; return
}

__Yutani__Event__setRawJson_() {
  _ivar_set rawJson "$1"
}
__Yutani__Event__eventType() {
  echo "$(_ivar eventType)"; return
}

__Yutani__Event__eventType_() {
  _ivar_set eventType "$1"
}

__Yutani__Event__getEventType() {
  echo "$(_ivar eventType)"; return
}

__Yutani__Event__setEventType_() {
  _ivar_set eventType "$1"
}
__Yutani__Event__widgetId() {
  echo "$(_ivar widgetId)"; return
}

__Yutani__Event__widgetId_() {
  _ivar_set widgetId "$1"
}

__Yutani__Event__getWidgetId() {
  echo "$(_ivar widgetId)"; return
}

__Yutani__Event__setWidgetId_() {
  _ivar_set widgetId "$1"
}
__Yutani__Event__keyName() {
  echo "$(_ivar keyName)"; return
}

__Yutani__Event__keyName_() {
  _ivar_set keyName "$1"
}

__Yutani__Event__getKeyName() {
  echo "$(_ivar keyName)"; return
}

__Yutani__Event__setKeyName_() {
  _ivar_set keyName "$1"
}
__Yutani__Event__keyMods() {
  echo "$(_ivar keyMods)"; return
}

__Yutani__Event__keyMods_() {
  _ivar_set keyMods "$1"
}

__Yutani__Event__getKeyMods() {
  echo "$(_ivar keyMods)"; return
}

__Yutani__Event__setKeyMods_() {
  _ivar_set keyMods "$1"
}
__Yutani__Event__mouseX() {
  echo "$(_ivar mouseX)"; return
}

__Yutani__Event__mouseX_() {
  _ivar_set mouseX "$1"
}

__Yutani__Event__getMouseX() {
  echo "$(_ivar mouseX)"; return
}

__Yutani__Event__setMouseX_() {
  _ivar_set mouseX "$1"
}
__Yutani__Event__mouseY() {
  echo "$(_ivar mouseY)"; return
}

__Yutani__Event__mouseY_() {
  _ivar_set mouseY "$1"
}

__Yutani__Event__getMouseY() {
  echo "$(_ivar mouseY)"; return
}

__Yutani__Event__setMouseY_() {
  _ivar_set mouseY "$1"
}
__Yutani__Event__mouseButton() {
  echo "$(_ivar mouseButton)"; return
}

__Yutani__Event__mouseButton_() {
  _ivar_set mouseButton "$1"
}

__Yutani__Event__getMouseButton() {
  echo "$(_ivar mouseButton)"; return
}

__Yutani__Event__setMouseButton_() {
  _ivar_set mouseButton "$1"
}
__Yutani__Event__data() {
  echo "$(_ivar data)"; return
}

__Yutani__Event__data_() {
  _ivar_set data "$1"
}

__Yutani__Event__getData() {
  echo "$(_ivar data)"; return
}

__Yutani__Event__setData_() {
  _ivar_set data "$1"
}

__Yutani__Event__class__fromJson_() {
  local json="$1"
    local json="$1"
    local instance eventType widgetId keyName keyMods mouseX mouseY mouseButton data

    instance=$(_generate_instance_id "Yutani__Event")
    _create_instance "Yutani::Event" "$instance"

    # Store raw JSON
    @ "$instance" _setRawJson: "$json"

    # Determine event type and extract fields
    if echo "$json" | jq -e '.key' >/dev/null 2>&1; then
        eventType="key"
        keyName=$(echo "$json" | jq -r '.key.key // ""')
        keyMods=$(echo "$json" | jq -r '.key.modifiers // ""')
        @ "$instance" _setEventType: "$eventType"
        @ "$instance" _setKeyName: "$keyName"
        @ "$instance" _setKeyMods: "$keyMods"
        elif echo "$json" | jq -e '.widget' >/dev/null 2>&1; then
            eventType="widget"
            widgetId=$(echo "$json" | jq -r '.widget.widgetId.id // ""')
            data=$(echo "$json" | jq -r '.widget.type // ""')
            @ "$instance" _setEventType: "$eventType"
            @ "$instance" _setWidgetId: "$widgetId"
            @ "$instance" _setData: "$data"
            elif echo "$json" | jq -e '.mouse' >/dev/null 2>&1; then
                eventType="mouse"
                mouseX=$(echo "$json" | jq -r '.mouse.x // 0')
                mouseY=$(echo "$json" | jq -r '.mouse.y // 0')
                mouseButton=$(echo "$json" | jq -r '.mouse.button // ""')
                @ "$instance" _setEventType: "$eventType"
                @ "$instance" _setMouseX: "$mouseX"
                @ "$instance" _setMouseY: "$mouseY"
                @ "$instance" _setMouseButton: "$mouseButton"
                elif echo "$json" | jq -e '.resize' >/dev/null 2>&1; then
                    eventType="resize"
                    @ "$instance" _setEventType: "$eventType"
                    elif echo "$json" | jq -e '.focus' >/dev/null 2>&1; then
                        eventType="focus"
                        @ "$instance" _setEventType: "$eventType"
                        else
                        eventType="unknown"
                        @ "$instance" _setEventType: "$eventType"
                    fi

                    echo "$instance"
}

__Yutani__Event__isKeyEvent() {
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "key" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event__isWidgetEvent() {
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "widget" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event__isMouseEvent() {
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "mouse" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event__isResizeEvent() {
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "resize" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event__isFocusEvent() {
    local et
    et="$(_ivar eventType)"
    if [[ "$et" == "focus" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event__eventType() {
  _ivar eventType
}

__Yutani__Event__widgetId() {
  _ivar widgetId
}

__Yutani__Event__keyName() {
  _ivar keyName
}

__Yutani__Event__keyMods() {
  _ivar keyMods
}

__Yutani__Event__mouseX() {
  _ivar mouseX
}

__Yutani__Event__mouseY() {
  _ivar mouseY
}

__Yutani__Event__mouseButton() {
  _ivar mouseButton
}

__Yutani__Event__data() {
  _ivar data
}

__Yutani__Event__rawJson() {
  _ivar rawJson
}

__Yutani__Event__widgetEventType() {
    local json
    json="$(_ivar rawJson)"
    echo "$json" | jq -r '.widget.type // ""'
}

__Yutani__Event__widgetData() {
    local json
    json="$(_ivar rawJson)"
    echo "$json" | jq -r '.widget.data // {}'
}

__Yutani__Event__widgetDataAt_() {
  local key="$1"
    local key="$1" json
    json="$(_ivar rawJson)"
    echo "$json" | jq -r ".widget.data.$key // \" \""
}

__Yutani__Event__isKey_() {
  local keyToCheck="$1"
    local keyToCheck="$1" kn
    kn="$(_ivar keyName)"
    if [[ "$kn" == "$keyToCheck" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event__isEnterKey() {
    @ "$_RECEIVER" isKey: "KEY_ENTER"
}

__Yutani__Event__isEscapeKey() {
    @ "$_RECEIVER" isKey: "KEY_ESC"
}

__Yutani__Event__isTabKey() {
    @ "$_RECEIVER" isKey: "KEY_TAB"
}

__Yutani__Event__isCtrlC() {
    @ "$_RECEIVER" isKey: "KEY_CTRL_C"
}

__Yutani__Event__isCtrlD() {
    @ "$_RECEIVER" isKey: "KEY_CTRL_D"
}

__Yutani__Event__isCtrlL() {
    @ "$_RECEIVER" isKey: "KEY_CTRL_L"
}

__Yutani__Event__isSubmission() {
    local wt
    wt=$(@ "$_RECEIVER" widgetEventType)
    if [[ "$wt" == "WIDGET_DONE" ]]; then echo "true"; else echo "false"; fi
}

__Yutani__Event___setRawJson_() {
  local v="$1"
  _ivar_set rawJson "$v"
}

__Yutani__Event___setEventType_() {
  local v="$1"
  _ivar_set eventType "$v"
}

__Yutani__Event___setWidgetId_() {
  local v="$1"
  _ivar_set widgetId "$v"
}

__Yutani__Event___setKeyName_() {
  local v="$1"
  _ivar_set keyName "$v"
}

__Yutani__Event___setKeyMods_() {
  local v="$1"
  _ivar_set keyMods "$v"
}

__Yutani__Event___setMouseX_() {
  local v="$1"
  _ivar_set mouseX "$v"
}

__Yutani__Event___setMouseY_() {
  local v="$1"
  _ivar_set mouseY "$v"
}

__Yutani__Event___setMouseButton_() {
  local v="$1"
  _ivar_set mouseButton "$v"
}

__Yutani__Event___setData_() {
  local v="$1"
  _ivar_set data "$v"
}
