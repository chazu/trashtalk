#!/usr/bin/env bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: Array.trash
# Generated: 2026-01-10T23:38:28

__Array__superclass="Object"
__Array__instanceVars="items:[]"
__Array__classInstanceVars=""
__Array__traits="Debuggable Persistable"
__Array__sourceHash=""

__Array__items() {
  echo "$(_ivar items)"; return
}

__Array__items_() {
  _ivar_set items "$1"
}

__Array__getItems() {
  echo "$(_ivar items)"; return
}

__Array__setItems_() {
  _ivar_set items "$1"
}

__Array__class__new() {
    local array_id
    array_id=$(@ Runtime generateId: "Array")
    @ Runtime create: "Array" id: "$array_id"
    echo "$array_id"
}

__Array__getItems() {
  echo "$(_ivar items)"; return
}

__Array__setItems_() {
  local newItems="$1"
  _ivar_set items "$newItems"
}

__Array___getItemsArray() {
  echo "$(_ivar items)"; return
}

__Array__at_() {
  local index="$1"
  echo "$(echo "$(_ivar items)" | jq -r --argjson i "$index" '.[$i] // empty')"; return
}

__Array__at_put_() {
  local index="$1"
  local value="$2"
  _ivar_set items "$(echo "$(_ivar items)" | jq -c --argjson i "$index" --arg v "$value" '.[$i] = $v')"
  echo "$value"; return
}

__Array__push_() {
  local value="$1"
  _ivar_set items "$(echo "$(_ivar items)" | jq -c --arg v "$value" '. + [$v]')"
  echo "$value"; return
}

__Array__pop() {
  local last
  last="$(echo "$(_ivar items)" | jq -r '.[-1] // empty')"
  _ivar_set items "$(echo "$(_ivar items)" | jq -c --argjson i "-1" 'del(.[$i])')"
  echo "$last"; return
}

__Array__size() {
  echo "$(echo "$(_ivar items)" | jq 'length')"; return
}

__Array__isEmpty() {
  echo "$(echo "$(_ivar items)" | jq 'length == 0')"; return
}

__Array__first() {
  echo "$(echo "$(_ivar items)" | jq -r '.[0] // empty')"; return
}

__Array__last() {
  echo "$(echo "$(_ivar items)" | jq -r '.[-1] // empty')"; return
}

__Array__show() {
  if (( $(echo "$(_ivar items)" | jq 'length == 0') )); then echo "(empty array)"; return; else echo "$(_ivar items)"; return; fi
}

__Array__withValues_() {
  local values="$1"
    local items value
    items="[]"
    for value in $1; do
        items=$(echo "$items" | jq -c --arg v "$value" '. + [$v]')
    done
    _ivar_set items "$items"
    echo "$_RECEIVER"
}

__Array__do_() {
  local aBlock="$1"
  local i len
  len="$(echo "$(_ivar items)" | jq 'length')"
  i="0"
  while (( $i < $len )); do @ "$aBlock" valueWith: "$(echo "$(_ivar items)" | jq -r --argjson i "$i" '.[$i] // empty')"; (( i = ($i + 1) )); done
}

__Array__collect_() {
  local aBlock="$1"
  local i len newItems result newArray
  len="$(echo "$(_ivar items)" | jq 'length')"
  newItems="[]"
  i="0"
  while (( $i < $len )); do result="$(@ "$aBlock" valueWith: "$(echo "$(_ivar items)" | jq -r --argjson i "$i" '.[$i] // empty')")"; newItems="$(echo "$newItems" | jq -c --arg v "$result" '. + [$v]')"; (( i = ($i + 1) )); done
  newArray="$(@ Array new)"
  @ "$newArray" setItems: "$newItems"
  echo "$newArray"; return
}

__Array__select_() {
  local aBlock="$1"
  local i len newItems element result newArray
  len="$(echo "$(_ivar items)" | jq 'length')"
  newItems="[]"
  i="0"
  while (( $i < $len )); do element="$(echo "$(_ivar items)" | jq -r --argjson i "$i" '.[$i] // empty')"; result="$(@ "$aBlock" valueWith: "$element")"; if [[ -n "$result" ]]; then newItems="$(echo "$newItems" | jq -c --arg v "$element" '. + [$v]')"; fi; (( i = ($i + 1) )); done
  newArray="$(@ Array new)"
  @ "$newArray" setItems: "$newItems"
  echo "$newArray"; return
}

__Array__inject_into_() {
  local initial="$1"
  local aBlock="$2"
  local i len acc
  len="$(echo "$(_ivar items)" | jq 'length')"
  acc="$initial"
  i="0"
  while (( $i < $len )); do acc="$(@ "$aBlock" valueWith: "$acc" and: "$(echo "$(_ivar items)" | jq -r --argjson i "$i" '.[$i] // empty')")"; (( i = ($i + 1) )); done
  echo "$acc"; return
}
