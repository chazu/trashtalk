#!/bin/bash
# Generated by Trashtalk Compiler (jq) - DO NOT EDIT
# Source: TestCounter.trash
# Generated: 2025-12-15T21:52:02

__TestCounter__superclass="Object"
__TestCounter__instanceVars="passed:0 failed:0"
__TestCounter__traits=""

__TestCounter__new() {
  local id
  id=$(_generate_instance_id TestCounter)
  _create_instance TestCounter $id
  echo $id
}

__TestCounter__assert_equals() {
  local actual="$1"
  local expected="$2"
    if [[ "$actual" == "$expected" ]]; then
        @ "$_RECEIVER" _pass
        else
        @ "$_RECEIVER" _fail: "Expected '$expected' but got '$actual'"
    fi
}

__TestCounter___pass() {
  local count
  count=$(@ $_RECEIVER getPassed)
  @ "$_RECEIVER" setPassed $((count + 1))
}

__TestCounter___fail() {
  local message="$1"
    local count
    count=$(@ "$_RECEIVER" getFailed)
    @ "$_RECEIVER" setFailed: $((count + 1))
    echo " FAIL: $message" >&2
}

__TestCounter__testIncrement() {
    local _self="$_RECEIVER"
    local c val
    c=$(@ Counter new)
    @ "$c" increment
    val=$(@ "$c" getValue)
    @ "$_self" assert_equals "$val" 1
}

__TestCounter__testIncrementBy() {
    local _self="$_RECEIVER"
    local c val
    c=$(@ Counter new)
    @ "$c" incrementBy 5
    val=$(@ "$c" getValue)
    @ "$_self" assert_equals "$val" 5
}

__TestCounter__testReset() {
    local _self="$_RECEIVER"
    local c val
    c=$(@ Counter new)
    @ "$c" increment
    @ "$c" reset
    val=$(@ "$c" getValue)
    @ "$_self" assert_equals "$val" 0
}

__TestCounter__class__runAll() {
    local instance passed failed total
    instance=$(@ TestCounter new)

    for method in $(declare -F | grep "__TestCounter__test" | sed "s/.*__TestCounter__//"); do
        echo " Running: $method"
        @ "$instance" "$method"
    done

    passed=$(@ "$instance" getPassed)
    failed=$(@ "$instance" getFailed)
    total=$((passed + failed))

    echo ""
    if [[ "$failed" -eq 0 ]]; then
        echo "All $total assertions passed"
        else
        echo "$passed passed, $failed failed (of $total assertions)"
    fi
}
